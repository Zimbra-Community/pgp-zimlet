<!DOCTYPE html>
<html lang="en" class="">
<head>
<meta charset='utf-8'>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<link rel="shortcut icon" href="../icon.png" />
<title>OpenPGP User Help</title>

<style type="text/css">
h1
{
   font-size:18px;
}
h2
{
   font-size:16px;
}
table {
    border-collapse: collapse;
    background-color:white; 
}
td{
   border:1px solid #888888;
   min-width:175px;
   padding:10px;
}
hr {
  border: 0;
  width: 100%;
   color: #888888;
   background-color: #888888;
   height: 1px;  
}
</style>
</head>


<body style="font-family: sans-serif; font-size:14px;"> 
<div style="width:990px">

				<h1 id="firstHeading" class="firstHeading" lang="en">OpenPGP Zimlet</h1>
      


					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#How_It_All_Works"><span class="tocnumber">1.1</span> <span class="toctext">How It All Works</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#OpenPGP_Zimlet_Setup_Guide"><span class="tocnumber">1.2</span> <span class="toctext">OpenPGP Zimlet Setup Guide</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#How_to_Send_and_Receive_Public_Keys"><span class="tocnumber">1.3</span> <span class="toctext">How to Send and Receive Public Keys</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Auto_Decrypt"><span class="tocnumber">1.4</span> <span class="toctext">Auto Decrypt</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#How_to_Send_Encrypted_Messages_with_OpenPGP"><span class="tocnumber">1.5</span> <span class="toctext">How to Send Encrypted Messages with OpenPGP</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Managing_your_contacts_Public_Keys"><span class="tocnumber">1.6</span> <span class="toctext">Managing your contacts Public Keys</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Importing_your_own_PGP_Private_Key_to_OpenPGP"><span class="tocnumber">1.7</span> <span class="toctext">Importing your own PGP Private Key to OpenPGP</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Supported_Formats_of_OpenPGP"><span class="tocnumber">1.8</span> <span class="toctext">Supported Formats of OpenPGP</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#About_Private_Key_Security"><span class="tocnumber">1.9</span> <span class="toctext">About Private Key Security</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Zimbra_Desktop"><span class="tocnumber">1.10</span> <span class="toctext">Zimbra Desktop</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#contacts-scanning"><span class="tocnumber">1.11</span> Storing public keys to Zimbra contacts</a></li>
<li class="toclevel-2 tocsection-14"><a href="#thunderbird-enigmail"><span class="tocnumber">1.12</span> Thunderbird/Enigmail compatibility</a></li>
<li class="toclevel-2 tocsection-15"><a href="#thunderbird-enigmail-export"><span class="tocnumber">1.13</span> Exporting public keys from Enigmail to Zimbra</a></li>
<li class="toclevel-2 tocsection-16"><a href="#fingerprint"><span class="tocnumber">1.15</span> Fingerprint</a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Overview">Overview</span></h2>
<p>The OpenPGP Zimlet allows XMission's Zimbra webmail to encrypt and sign email messages. 
</p><p>OpenPGP encryption prevents your messages from being opened by anyone other than the intended recipient. It will prevents your message from being altered or changed by anyone other than yourself, maintaining the authenticity of your content. 
</p>
<ul><li><i>What is a <b>Zimlet</b>?</i> - Zimlets are add-on features to your Zimbra email found in your Zimbra's Preferences tab under "Zimlets" They enhance the functionality of your Zimbra client.</li>
<li><i>What is <b>PGP/OpenPGP</b>?</i> - PGP stands for "<b>P</b>retty <b>G</b>ood <b>P</b>rivacy". It is an encryption method shared between two people that have exchanged public and private keys to one another. OpenPGP is a PGP standard using the PGP security software of version 5.x+ as a basis.</li>
<li><i>What is a <b>Public/Private Key</b>?</i> - Both Public and Private keys are two unique cryptographic keys that work together to both encrypt and decrypt information, in this case, in plain text. </li></ul>
<p><span style="color:red"> <b>Note:</b> </span> Your <b>public</b> key may be shared with <i>others</i>, while your <b>private</b> key remains <i>secret</i> to yourself and your Zimbra OpenPGP Zimlet!
</p>
<ul><li><i>What email applications support <b>Encryption</b>?</i> Most modern email and webmail applications can support PGP key encryption technology including Zimbra webmail, Microsoft Outlook, Thunderbird, and more.</li></ul>
<p><br>
</p>
<h3><span class="mw-headline" id="How_It_All_Works">How It All Works</span></h3>
<hr>
<p>By creating a message that is encrypted with the OpenPGP Zimlet, only recipients with a matching private key are able to decrypt and read your email. The OpenPGP Zimlet makes this process as simple as clicking a few buttons. After composing your email, you may click the "Encrypt Message" option. 
</p><p><span style="color:red"> <b>Note:</b> </span> Only <b>Plain Text</b> in the message body is encrypted. This Zimlet automatically converts messages to plain text when you click "Encrypt message."
</p><p><a href="https://wiki.xmission.com/File:Email-encryption-graphic.png" class="image"><img alt="Email-encryption-graphic.png" src="Email-encryption-graphic.png" width="794" height="106"></a>
</p>
<h3><span class="mw-headline" id="OpenPGP_Zimlet_Setup_Guide">OpenPGP Zimlet Setup Guide</span></h3>
<hr>
<p>1. Open your <b>Preferences</b> in Zimbra.
</p><p><a href="https://wiki.xmission.com/File:Preferences.png" class="image"><img alt="Preferences.png" src="500px-Preferences.png" width="500" height="90" srcset="/images/c/c1/Preferences.png 1.5x, /images/c/c1/Preferences.png 2x"></a>
</p><p>2. Navigate to <b>"Zimlets"</b>.
</p><p><a href="https://wiki.xmission.com/File:Zimlets1.png" class="image"><img alt="Zimlets1.png" src="Zimlets1.png" width="199" height="519"></a>
</p><p>3. Check the box for <b>"OpenPGP"</b>.
</p><p><a href="https://wiki.xmission.com/File:Openpgpzimletsmall.png" class="image"><img alt="Openpgpzimletsmall.png" src="Openpgpzimletsmall.png" width="503" height="139"></a>
</p><p>4. Return to your <b>"Mail"</b> tab and expand the <b>"Zimlets"</b> options to find <b>"OpenPGP"</b>.
</p><p><a href="https://wiki.xmission.com/File:Openzimlets.png" class="image"><img alt="Openzimlets.png" src="Openzimlets.png" width="193" height="334"></a>
</p><p>5. Right click on <b>OpenPGP</b> and select <b>"Generate Key Pair"</b>.
</p><p><a href="https://wiki.xmission.com/File:Genkeypair.png" class="image"><img alt="Genkeypair.png" src="Genkeypair.png" width="311" height="208"></a>
</p><p>6. After generating your Key Pair, it will look similar to the message below:
</p><p><a href="https://wiki.xmission.com/File:Generatedkeypair.png" class="image"><img alt="Generatedkeypair.png" src="500px-Generatedkeypair.png" width="500" height="250" srcset="/images/8/89/Generatedkeypair.png 1.5x, /images/8/89/Generatedkeypair.png 2x"></a>
</p>
<h3><span class="mw-headline" id="How_to_Send_and_Receive_Public_Keys">How to Send and Receive Public Keys</span></h3>
<hr>
<p>1. To send a public key, simply <b>right click</b> the OpenPGP zimlet under the "Zimlets" windows and select <b>"Send someone my public key"</b>.
</p><p><a href="https://wiki.xmission.com/File:Sendsomeonekey.png" class="image"><img alt="Sendsomeonekey.png" src="Sendsomeonekey.png" width="311" height="208"></a>
</p><p>2. To receive a public key from someone, they will commonly need to send you their key. You will receive an email with a message similar to the picture below:
</p><p><a href="https://wiki.xmission.com/File:Receivedkey.png" class="image"><img alt="Receivedkey.png" src="500px-Receivedkey.png" width="500" height="146" srcset="/images/d/d5/Receivedkey.png 1.5x, /images/d/d5/Receivedkey.png 2x"></a>
</p>
<h3><span class="mw-headline" id="Auto_Decrypt">Auto Decrypt</span></h3>
<hr>
<ul><li>You can <b>enable/disable</b> the "Auto decrypt" option, inside the "Manage Keys" menu.</li></ul>
<p><a href="https://wiki.xmission.com/File:Autodecrypt.png" class="image"><img alt="Autodecrypt.png" src="500px-Autodecrypt.png" width="500" height="441" srcset="/images/b/b4/Autodecrypt.png 1.5x, /images/b/b4/Autodecrypt.png 2x"></a>
</p>
<h3><span class="mw-headline" id="How_to_Send_Encrypted_Messages_with_OpenPGP">How to Send Encrypted Messages with OpenPGP</span></h3>
<hr>
<p>1. Compose the body of your  message followed by clicking <b>"Encrypt Message"</b>.
</p>
<ul><li><span style="color:red"> <b>Note:</b> </span> <b>All messages must have the body formatted in plain text</b>.</li></ul>
<p><a href="https://wiki.xmission.com/File:Encryptmssg.png" class="image"><img alt="Encryptmssg.png" src="500px-Encryptmssg.png" width="500" height="279" srcset="/images/1/12/Encryptmssg.png 1.5x, /images/1/12/Encryptmssg.png 2x"></a>
</p><p>2. Once you have finished, and have clicked <b>"Encrypt Message"</b> you will receive a confirmation window.
</p>
<ul><li> <span style="color:red"> <b>Note:</b> </span> If you are sending to multiple recipients, you will need to use CTRL+Left Click to select multiple addresses. Use CMD+click on Mac.</li></ul>
<p><a href="https://wiki.xmission.com/File:Finishingmessage.png" class="image"><img alt="Finishingmessage.png" src="500px-Finishingmessage.png" width="500" height="349" srcset="/images/2/28/Finishingmessage.png 1.5x, /images/2/28/Finishingmessage.png 2x"></a>
</p>
<ul><li> <span style="color:red"> <b>Note:</b> </span> It is important to add your attachments during this screen, or else they will not be encrypted. </li></ul>
<p>3. The body of your message will be encrypted and encoded as base64. You may now send the message to the desired recipients.
</p><p><a href="https://wiki.xmission.com/File:Finishedpgp.png" class="image"><img alt="Finishedpgp.png" src="500px-Finishedpgp.png" width="500" height="431" srcset="/images/1/15/Finishedpgp.png 1.5x, /images/1/15/Finishedpgp.png 2x"></a>
</p>
<h3><span class="mw-headline" id="Managing_your_contacts_Public_Keys">Managing your contacts Public Keys</span></h3>
<hr>
<p>When you accept public keys, the OpenPGP Zimlet automatically adds them to your <b>"Managed Keys"</b> under the <b>"Public Keys"</b> section. This is unique to the user that sent them. 
</p><p><a href="https://wiki.xmission.com/File:Managepubkeys.png" class="image"><img alt="Managepubkeys.png" src="500px-Managepubkeys.png" width="500" height="440" srcset="/images/4/43/Managepubkeys.png 1.5x, /images/4/43/Managepubkeys.png 2x"></a>
</p><p><br>
</p>
<h3><span class="mw-headline" id="Importing_your_own_PGP_Private_Key_to_OpenPGP">Importing your own PGP Private Key to OpenPGP</span></h3>
<hr>
<p>If you already have your own PGP Private Key, you can simply paste your key into the Private Key field inside the <b>"Manage Keys"</b> section of the OpenPGP zimlet. 
</p><p><a href="https://wiki.xmission.com/File:Privatekey1.png" class="image"><img alt="Privatekey1.png" src="500px-Privatekey1.png" width="500" height="443" srcset="/images/a/a1/Privatekey1.png 1.5x, /images/a/a1/Privatekey1.png 2x"></a>
</p>
<h3><span class="mw-headline" id="Supported_Formats_of_OpenPGP">Supported Formats of OpenPGP</span></h3>
<hr>
<p><b>Sending Messages</b>
</p>
<ul><li>Inline-PGP encrypted messages with full UTF-8 support in text/plain format</li>
<li>Inline-PGP clear signed messages with full UTF-8 support in text/plain format</li>
<li>Inline-PGP encrypted attachments</li></ul>
<p><b>Receiving Messages</b>
</p>
<ul><li>Inline-PGP encrypted messages with full UTF-8 support in text/plain format</li>
<li>Inline-PGP clear signed messages with full UTF-8 support in text/plain format</li>
<li>Inline-PGP encrypted attachments</li>
<li>PGP/MIME messages with body parts text/plain</li>
<li>PGP/MIME messages with body parts text/html will be converted to text</li>
<li>PGP/MIME messages with parts that use transfer encoding base64 and quoted-printable and charset UTF-8</li>
<li>PGP/MIME encrypted attachments</li></ul>
<p><br>
</p>
<h3><span class="mw-headline" id="About_Private_Key_Security">About Private Key Security</span></h3>
<hr>
<p>It is important to keep your private key secure when using public key cryptography methods such as such as PGP. You should not share your private key with anyone under any circumstances.
</p><p>With that said, please note that the OpenPGP Zimlet does NOT store your private key on our servers. If you choose to "store" your private key, it will be stored <em>in your browser, <b>not on our servers</b></em>. It is stored with AES-256 encryption. If you choose to store the passphrase to your key, that passphrase can be stored either on our servers or in your browser's local storage. If you store your passphrase, it is potentially possible for somebody with access to your computer to acquire your unencrypted private key.
</p><p>You can also choose to store nothing, providing your private key and passphrase manually every time you need to sign or encrypt a message.
</p><p>We recommend storing your key, but not your passphrase, in your browser. This provides a good balance between security and convenience.
</p>
<h3><span class="mw-headline" id="Zimbra_Desktop">Zimbra Desktop</span></h3>
<hr>
<p>Those using the Zimbra Desktop application this Zimlet is not compatible for install. You will need to log in to your webmail to utilize this Zimlet.
</p>



<section id="contacts-scanning">
<h3><span class="mw-headline">Storing public keys to Zimbra contacts</span></h3>
<hr>
Optionally you can store public keys in Contacts, the Zimbra Addressbook. First enable the Scan Contacts option then copy/paste public keys to the notes field of your contacts.<br>
<br><img src="thunderbird-enigmail-import-keys.png" alt=""><br>
<br><img src="scan-contacts.png" alt=""><br>


<br><br></section><section id="thunderbird-enigmail">
<h3><span class="mw-headline">Reading messages encrypted/signed with Thunderbird/Enigmail</span></h3>
<hr>
OpenPGP/MIME encrypted messages using RFC 3156 implemented in Thunderbird/Enigmail can be decrypted and verified by this Zimlet. This is beta functionality. Plain text messages and attachments are supported. HTML formatted messages are converted to plain text.<br>
<br><img src="thunderbird-enigmail-support.png" alt=""><br><br>

Attachments encrypted by Zimbra OpenPGP Zimlet can be decrypted by Thunderbird/Enigmail users, right click the attachment and click `Decrypt and Open`.<br>
<br><img src="attachment-decrypt-enigmail.png" alt=""><br><br>


<br><br></section><section id="thunderbird-enigmail-export">
<h3><span class="mw-headline">Exporting public keys from Enigmail to Zimbra</span></h3>
<hr>
You can export all your public keys from Enigmail to Zimbra, first copy them from Enigmail Key Management, and then paste them in the notes field of a new contact in Zimbra, also enable <a href="#contacts-scanning">contacts scanning</a>.<br>
<br><img src="thunderbird-enigmail-export-keys.png" alt=""><br>
<br><img src="thunderbird-enigmail-import-keys.png" alt=""><br><br>

<br><br></section><section id="fingerprint">
<h3><span class="mw-headline">Fingerprint</span></h3>
<hr>
Key fingerprint verification is actually much easier than it sounds.  In a nutshell, both sides should compare the fingerprints of the public key in question.  If the fingerprints match, then they can proceed to send a message.  If they do not, then the key can NOT be trusted. 
<br> <br> 
The process of comparing fingerprints should be performed through a mechanism whereby the identity of the owner of the public key in question is known or trusted.  This may come in the form of a phone call to a trusted phone number, a face-to-face conversation or for example a business card exchange. The goal is to ensure that the person you are communicating with is who you think he or she is.  If you know the key’s owner and recognize their voice, it is easy enough to call them and verify the key’s fingerprint over the telephone.
 <br> <br> 
It is best to use a different communication method than the one that was used to send the key itself. A good combination is to send the key via e-mail, and the key fingerprint via a telephone conversation or received in person on a business card.<br> 
<br><br>

<br><br></section><section id="licenses">
<h3><span class="mw-headline">License and third party FOSS libraries</span></h3>
<hr>
Copyright (C) 2014-2016&nbsp; Barry de Graaff 
<br><br>This program is free software: you can redistribute it and/or modify
<br> it under the terms of the GNU General Public License as published by
<br> the Free Software Foundation, either version 2 of the License, or
<br> (at your option) any later version.
<br> <br> This program is distributed in the hope that it will be useful,
<br> but WITHOUT ANY WARRANTY; without even the implied warranty of
<br> MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.&nbsp; See the
<br> GNU General Public License for more details.
<br> <br> You should have received a copy of the GNU General Public License
<br> along with this program.&nbsp; If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.
<br>
<br><br>
<b>openpgp.js</b><br>
<b>openpgp.worker.js</b><br>
OpenPGP.js is a Javascript implementation of the OpenPGP protocol. This is defined in RFC 4880.<br>
https://github.com/openpgpjs/openpgpjs/blob/master/LICENSE<br>
Licensed under the GNU Lesser General Public License (3.0 or any later version).<br>
<br>
<b>mimeparser.js</b><br>
A "low level" mime parsing module.<br>
https://github.com/emailjs/emailjs-mime-parser/blob/master/LICENSE<br>
Copyright (c) 2013 Andris Reinman.<br>
<br>
<b>addressparser.js</b><br>
A UMD module that allows you to parse mime formatted e-mail address lists in node and the browser.<br>
https://github.com/emailjs/emailjs-addressparser/blob/master/LICENSE<br>
Copyright (c) 2013 Andris Reinman.<br>
<br>
<b>mimefuncs.js</b><br>
Encode and decode quoted printable and base64 strings.<br>
https://www.npmjs.com/package/mimefuncs#license<br>
Copyright (c) 2013 Andris Reinman.<br>
<br>
<b>stringencoding.js</b><br>
A polyfill for the Encoding Living Standard API for the Web, allowing encoding and decoding of textual data to and from Typed Array buffers for binary data in JavaScript.<br>
https://github.com/inexorabletash/text-encoding/blob/master/LICENSE.md<br>
Released into the public domain.<br>
<br>
<b>zlib.min.js.map</b><br>
JavaScript Zlib Library<br>
https://github.com/imaya/zlib.js/blob/master/LICENSE<br>
Copyright © 2012 imaya. Licensed under the MIT License.<br>
<br>
<b>aes.js, aes-ctr.js</b><br>
JavaScript implementation of AES standard (NIST FIPS-197) for symmetric encryption.
http://www.movable-type.co.uk/scripts/aes.html<br>
https://github.com/chrisveness/crypto/blob/master/LICENSE<br>
Copyright © 2014 Chris Veness. Licensed under the MIT License.<br>
<br>
<b>htmlToText.js</b><br>
jsHtmlToText is a *very* basic regex-based HTML stripper. <br>
https://github.com/eldios/htmlToText/blob/master/jsHtmlToText.js<br>
Copyright (C) 2006 Google Inc. Licensed under the Apache License, Version 2.0<br>
<br>
<b>purify.js</b><br>
DOMPurify is a DOM-only, super-fast, uber-tolerant XSS sanitizer for HTML, MathML and SVG.<br>
https://github.com/cure53/DOMPurify/blob/master/LICENSE<br>
Purify Copyright 2015 Mario Heiderich under the Apache License Version 2.0.<br>
<br>

<b>Icons ans logo</b><br>
Icons and logo where taken from the tango-icon-theme package and where released to the Public Domain by the Tango Desktop Project.<br>
File encrypted icon (file-pgp-encrypted) by Jakub Steiner http://jimmac.musichall.cz/ This file is licensed under the Creative Commons Attribution-Share Alike 2.0 Generic license.<br>
</section>


<p>This help page was written by <a target="_blank" rel="nofollow noreferrer noopener" href="https://wiki.xmission.com/OpenPGP_Zimlet">XMission</a>.
</p>


</div></div>
